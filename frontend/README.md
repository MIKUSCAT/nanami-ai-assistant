<div align="center">

# ä¸ƒæµ· AI åŠ©æ‰‹ - æ¡Œé¢åº”ç”¨ ğŸŒŠ

**ä¼˜é›…ã€è½»é‡çš„ AI èŠå¤©æ¡Œé¢å®¢æˆ·ç«¯**

[![Electron](https://img.shields.io/badge/Electron-47848F?logo=electron&logoColor=white)](https://www.electronjs.org/)
[![React](https://img.shields.io/badge/React-18-61dafb?logo=react)](https://reactjs.org/)
[![TypeScript](https://img.shields.io/badge/TypeScript-3178C6?logo=typescript&logoColor=white)](https://www.typescriptlang.org/)
[![License](https://img.shields.io/badge/license-MIT-blue.svg)](../LICENSE)

</div>

---

## âœ¨ æ ¸å¿ƒç‰¹æ€§

<table>
<tr>
<td width="50%">

### ğŸ’¬ å¯¹è¯ä½“éªŒ
- **æµå¼å“åº”** - å®æ—¶æ˜¾ç¤º AI å›å¤
- **å¤šä¼šè¯ç®¡ç†** - æ— é™å¯¹è¯å†å²
- **è‡ªåŠ¨æ ‡é¢˜** - æ™ºèƒ½ç”Ÿæˆä¼šè¯æ ‡é¢˜
- **Markdown æ¸²æŸ“** - æ”¯æŒä»£ç é«˜äº®

</td>
<td width="50%">

### ğŸ¨ è§†è§‰è®¾è®¡
- **åŒä¸»é¢˜** - æ˜äº®/æš—é»‘è‡ªç”±åˆ‡æ¢
- **è‡ªå®šä¹‰æ ‡é¢˜æ ** - åŸç”Ÿçª—å£æ§åˆ¶
- **æµç•…åŠ¨ç”»** - ä¼˜é›…çš„è¿‡æ¸¡æ•ˆæœ
- **å“åº”å¼å¸ƒå±€** - é€‚é…å„ç§å±å¹•

</td>
</tr>
<tr>
<td width="50%">

### ğŸ“ ä»»åŠ¡ç®¡ç†
- **å†…ç½® TODO** - å¯¹è¯å³è§„åˆ’
- **çŠ¶æ€è¿½è¸ª** - å®æ—¶æ›´æ–°ä»»åŠ¡è¿›åº¦
- **å¿«é€Ÿæ“ä½œ** - ä¸€é”®å®Œæˆ/åˆ é™¤
- **æŒä¹…åŒ–å­˜å‚¨** - ä»»åŠ¡ä¸ä¸¢å¤±

</td>
<td width="50%">

### ğŸ“ æ–‡ä»¶å¤„ç†
- **æ‹–æ‹½ä¸Šä¼ ** - æ‹–å…¥å³åˆ†æ
- **å¤šæ ¼å¼æ”¯æŒ** - æ–‡æœ¬/å›¾ç‰‡/æ–‡æ¡£
- **æ™ºèƒ½è§£æ** - AI è‡ªåŠ¨ç†è§£å†…å®¹
- **æ–‡ä»¶é¢„è§ˆ** - æŸ¥çœ‹ä¸Šä¼ å†å²

</td>
</tr>
</table>

---

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

<div align="center">

![Electron](https://img.shields.io/badge/Electron-47848F?style=for-the-badge&logo=electron&logoColor=white)
![React](https://img.shields.io/badge/React-61DAFB?style=for-the-badge&logo=react&logoColor=black)
![TypeScript](https://img.shields.io/badge/TypeScript-3178C6?style=for-the-badge&logo=typescript&logoColor=white)
![Tailwind CSS](https://img.shields.io/badge/Tailwind_CSS-38B2AC?style=for-the-badge&logo=tailwind-css&logoColor=white)
![Vite](https://img.shields.io/badge/Vite-646CFF?style=for-the-badge&logo=vite&logoColor=white)
![Zustand](https://img.shields.io/badge/Zustand-433E38?style=for-the-badge&logo=react&logoColor=white)

</div>

| ç±»åˆ« | æŠ€æœ¯ | ç”¨é€” |
|-----|------|------|
| **æ¡Œé¢æ¡†æ¶** | Electron | è·¨å¹³å°æ¡Œé¢åº”ç”¨ |
| **UI æ¡†æ¶** | React 18 | ç”¨æˆ·ç•Œé¢ |
| **ç±»å‹ç³»ç»Ÿ** | TypeScript | ç±»å‹å®‰å…¨ |
| **æ„å»ºå·¥å…·** | Vite | å¿«é€Ÿå¼€å‘ä¸æ„å»º |
| **çŠ¶æ€ç®¡ç†** | Zustand | å…¨å±€çŠ¶æ€ |
| **æ ·å¼æ–¹æ¡ˆ** | Tailwind CSS | åŸå­åŒ– CSS |
| **Markdown** | markdown-it | Markdown æ¸²æŸ“ |
| **ä»£ç é«˜äº®** | highlight.js | è¯­æ³•é«˜äº® |
| **å›¾æ ‡åº“** | Lucide React | å›¾æ ‡ç»„ä»¶ |

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ğŸ“‹ å‰ç½®è¦æ±‚

- **Node.js**: 16.x æˆ–æ›´é«˜ç‰ˆæœ¬
- **npm**: 7.x æˆ–æ›´é«˜ç‰ˆæœ¬
- **åç«¯æœåŠ¡**: ç¡®ä¿åç«¯æœåŠ¡å·²å¯åŠ¨ï¼ˆé»˜è®¤ `http://localhost:7878`ï¼‰

### ğŸ”§ å¼€å‘æ­¥éª¤

**1. å®‰è£…ä¾èµ–**

```bash
npm install
```

**2. å¯åŠ¨å¼€å‘æ¨¡å¼**

```bash
npm run electron:dev
```

è¿™ä¼šåŒæ—¶å¯åŠ¨ï¼š
- Vite å¼€å‘æœåŠ¡å™¨ï¼ˆReact çƒ­æ›´æ–°ï¼‰
- Electron ä¸»è¿›ç¨‹ï¼ˆæ¡Œé¢çª—å£ï¼‰

**3. æ„å»ºç”Ÿäº§ç‰ˆæœ¬**

```bash
npm run electron:build
```

æ„å»ºäº§ç‰©ä½äº `release/` ç›®å½•ã€‚

---

## ğŸ“¦ æ‰“åŒ…æˆ .exe

### Windows å¹³å°

é¡¹ç›®å·²é…ç½® `electron-builder`ï¼Œç›´æ¥è¿è¡Œï¼š

```bash
npm run electron:build
```

**è¾“å‡ºä½ç½®**ï¼š
- `release/` - å®‰è£…åŒ…ï¼ˆ.exeï¼‰
- `release/win-unpacked/` - å…å®‰è£…ç‰ˆæœ¬

**è‡ªå®šä¹‰æ‰“åŒ…é…ç½®**ï¼š

ç¼–è¾‘ `package.json` ä¸­çš„ `build` å­—æ®µï¼š

```json
{
  "build": {
    "appId": "com.mikuscat.nanami-assistant",
    "productName": "ä¸ƒæµ·AIåŠ©æ‰‹",
    "directories": {
      "output": "release"
    },
    "win": {
      "target": [
        "nsis",      // å®‰è£…åŒ…
        "portable"   // ä¾¿æºç‰ˆ
      ],
      "icon": "public/icon.ico"
    }
  }
}
```

### macOS å¹³å°

```bash
npm run electron:build
```

è¾“å‡º `.dmg` å’Œ `.app` æ–‡ä»¶ã€‚

### Linux å¹³å°

```bash
npm run electron:build
```

è¾“å‡º `.AppImage` æˆ– `.deb` æ–‡ä»¶ã€‚

---

## âš™ï¸ é…ç½®è¯´æ˜

### åç«¯ API åœ°å€

ç¼–è¾‘ `src/config.ts`ï¼š

```typescript
export const API_BASE_URL = process.env.VITE_API_BASE_URL || 'http://localhost:7878'
```

æˆ–åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `.env` æ–‡ä»¶ï¼š

```bash
VITE_API_BASE_URL=http://your-backend-url:7878
```

### åº”ç”¨é…ç½®

ç¼–è¾‘ `electron/main.ts`ï¼š

```typescript
const mainWindow = new BrowserWindow({
  width: 1200,           // çª—å£å®½åº¦
  height: 800,           // çª—å£é«˜åº¦
  minWidth: 800,         // æœ€å°å®½åº¦
  minHeight: 600,        // æœ€å°é«˜åº¦
  frame: false,          // æ— è¾¹æ¡†ï¼ˆè‡ªå®šä¹‰æ ‡é¢˜æ ï¼‰
  transparent: false,    // é€æ˜çª—å£
  // ...
})
```

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
frontend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/              # React ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ TitleBar/           # è‡ªå®šä¹‰æ ‡é¢˜æ 
â”‚   â”‚   â”‚   â””â”€â”€ index.tsx       # - çª—å£æ§åˆ¶æŒ‰é’®
â”‚   â”‚   â”œâ”€â”€ Sidebar/            # ä¼šè¯ä¾§è¾¹æ 
â”‚   â”‚   â”‚   â””â”€â”€ index.tsx       # - ä¼šè¯åˆ—è¡¨ã€æ–°å»ºå¯¹è¯
â”‚   â”‚   â”œâ”€â”€ MessageItem/        # æ¶ˆæ¯é¡¹
â”‚   â”‚   â”‚   â””â”€â”€ index.tsx       # - ç”¨æˆ·/AI æ¶ˆæ¯å±•ç¤º
â”‚   â”‚   â”œâ”€â”€ ChatInput/          # è¾“å…¥æ¡†
â”‚   â”‚   â”‚   â””â”€â”€ index.tsx       # - æ–‡æœ¬è¾“å…¥ã€æ–‡ä»¶ä¸Šä¼ 
â”‚   â”‚   â”œâ”€â”€ TodoList/           # ä»»åŠ¡åˆ—è¡¨
â”‚   â”‚   â”‚   â””â”€â”€ index.tsx       # - TODO å±•ç¤ºä¸æ“ä½œ
â”‚   â”‚   â””â”€â”€ Settings/           # è®¾ç½®é¢æ¿
â”‚   â”‚       â””â”€â”€ index.tsx       # - ä¸»é¢˜åˆ‡æ¢ã€API é…ç½®
â”‚   â”‚
â”‚   â”œâ”€â”€ services/               # API æœåŠ¡å±‚
â”‚   â”‚   â””â”€â”€ api.ts             # - åç«¯é€šä¿¡ï¼ˆæµå¼è¯·æ±‚ï¼‰
â”‚   â”‚
â”‚   â”œâ”€â”€ store/                  # Zustand çŠ¶æ€ç®¡ç†
â”‚   â”‚   â””â”€â”€ chat.ts            # - èŠå¤©çŠ¶æ€ã€ä¼šè¯ç®¡ç†
â”‚   â”‚
â”‚   â”œâ”€â”€ types/                  # TypeScript ç±»å‹å®šä¹‰
â”‚   â”‚   â””â”€â”€ index.ts           # - Messageã€Sessionã€Todo ç­‰
â”‚   â”‚
â”‚   â”œâ”€â”€ App.tsx                # ä¸»åº”ç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ main.tsx               # React å…¥å£
â”‚   â”œâ”€â”€ index.css              # å…¨å±€æ ·å¼
â”‚   â””â”€â”€ config.ts              # é…ç½®æ–‡ä»¶
â”‚
â”œâ”€â”€ electron/                   # Electron ä¸»è¿›ç¨‹
â”‚   â”œâ”€â”€ main.ts                # - åº”ç”¨å…¥å£ã€çª—å£ç®¡ç†
â”‚   â””â”€â”€ preload.ts             # - é¢„åŠ è½½è„šæœ¬ï¼ˆIPC é€šä¿¡ï¼‰
â”‚
â”œâ”€â”€ public/                     # é™æ€èµ„æº
â”‚   â”œâ”€â”€ icon.svg               # åº”ç”¨å›¾æ ‡
â”‚   â””â”€â”€ icon.ico               # Windows å›¾æ ‡
â”‚
â”œâ”€â”€ package.json               # é¡¹ç›®é…ç½®
â”œâ”€â”€ vite.config.ts             # Vite é…ç½®
â”œâ”€â”€ tailwind.config.js         # Tailwind é…ç½®
â””â”€â”€ tsconfig.json              # TypeScript é…ç½®
```

---

## ğŸ¨ è®¾è®¡ç†å¿µ

### ç®€çº¦è€Œä¸ç®€å•

å‚è€ƒ **Cherry Studio** è®¾è®¡é£æ ¼ï¼Œè¿½æ±‚ï¼š

- âœ… **æ¸…æ™°çš„è§†è§‰å±‚æ¬¡** - ä¸»æ¬¡åˆ†æ˜çš„ä¿¡æ¯ç»“æ„
- âœ… **æµç•…çš„äº¤äº’åŠ¨ç”»** - ä¼˜é›…çš„è¿‡æ¸¡æ•ˆæœ
- âœ… **ä¼˜é›…çš„é…è‰²æ–¹æ¡ˆ** - æ·±è‰² `#1F2428` / æµ…è‰² `#FCF9F5`
- âœ… **ç²¾è‡´çš„ç»†èŠ‚å¤„ç†** - åœ†è§’ã€é˜´å½±ã€é—´è·

### é…è‰²æ–¹æ¡ˆ

```css
/* æš—è‰²ä¸»é¢˜ */
--bg-primary: #1F2428
--bg-secondary: #2D333B
--text-primary: #ADBAC7
--accent: #539BF5

/* äº®è‰²ä¸»é¢˜ */
--bg-primary: #FCF9F5
--bg-secondary: #FFFFFF
--text-primary: #1F2328
--accent: #0969DA
```

---

## ğŸ”Œ IPC é€šä¿¡

Electron ä¸»è¿›ç¨‹ä¸æ¸²æŸ“è¿›ç¨‹é€šè¿‡ IPC é€šä¿¡ï¼š

### é¢„åŠ è½½è„šæœ¬ï¼ˆpreload.tsï¼‰

```typescript
contextBridge.exposeInMainWorld('electron', {
  minimize: () => ipcRenderer.send('window-minimize'),
  maximize: () => ipcRenderer.send('window-maximize'),
  close: () => ipcRenderer.send('window-close'),
})
```

### ä¸»è¿›ç¨‹ï¼ˆmain.tsï¼‰

```typescript
ipcMain.on('window-minimize', () => {
  mainWindow.minimize()
})

ipcMain.on('window-maximize', () => {
  if (mainWindow.isMaximized()) {
    mainWindow.unmaximize()
  } else {
    mainWindow.maximize()
  }
})

ipcMain.on('window-close', () => {
  mainWindow.close()
})
```

### æ¸²æŸ“è¿›ç¨‹ï¼ˆTitleBar ç»„ä»¶ï¼‰

```typescript
const handleMinimize = () => window.electron.minimize()
const handleMaximize = () => window.electron.maximize()
const handleClose = () => window.electron.close()
```

---

## ğŸ“¡ API é€šä¿¡

### æµå¼è¯·æ±‚

ä½¿ç”¨ Server-Sent Events (SSE) å®ç°æµå¼å“åº”ï¼š

```typescript
// src/services/api.ts
export async function sendMessage(
  input: string,
  sessionId: string,
  onChunk: (chunk: string) => void
) {
  const response = await fetch(`${API_BASE_URL}/chat`, {
    method: 'POST',
    body: formData,
  })

  const reader = response.body.getReader()
  const decoder = new TextDecoder()

  while (true) {
    const { done, value } = await reader.read()
    if (done) break

    const chunk = decoder.decode(value)
    onChunk(chunk)  // å®æ—¶å›è°ƒ
  }
}
```

### æ–‡ä»¶ä¸Šä¼ 

```typescript
const formData = new FormData()
formData.append('input', message)
formData.append('session_id', sessionId)
formData.append('file', file)  // å¯é€‰

await sendMessage(formData)
```

---

## ğŸ› å¸¸è§é—®é¢˜

### Q1: å¼€å‘æ¨¡å¼ä¸‹çª—å£æ— æ³•æ‰“å¼€

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# æ¸…é™¤ç¼“å­˜
rm -rf node_modules dist dist-electron
npm install
npm run electron:dev
```

### Q2: æ‰“åŒ…åæ— æ³•è¿æ¥åç«¯

**åŸå› **ï¼šç¡¬ç¼–ç äº† `localhost`

**è§£å†³æ–¹æ¡ˆ**ï¼šåœ¨è®¾ç½®é¢æ¿æä¾› API åœ°å€é…ç½®ï¼Œæˆ–ä½¿ç”¨ç¯å¢ƒå˜é‡ï¼š

```typescript
const API_BASE_URL = import.meta.env.VITE_API_BASE_URL || 'http://localhost:7878'
```

### Q3: å›¾æ ‡æœªæ˜¾ç¤º

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. ç¡®ä¿ `public/icon.ico` å­˜åœ¨
2. åœ¨ `package.json` ä¸­é…ç½®ï¼š
```json
{
  "build": {
    "win": {
      "icon": "public/icon.ico"
    }
  }
}
```

---

## ğŸš€ æ€§èƒ½ä¼˜åŒ–

### 1. React æ€§èƒ½ä¼˜åŒ–

```typescript
// ä½¿ç”¨ React.memo é¿å…ä¸å¿…è¦çš„é‡æ¸²æŸ“
export const MessageItem = React.memo(({ message }) => {
  // ...
})

// ä½¿ç”¨ useMemo ç¼“å­˜è®¡ç®—ç»“æœ
const sortedMessages = useMemo(() => {
  return messages.sort((a, b) => a.timestamp - b.timestamp)
}, [messages])
```

### 2. Electron æ€§èƒ½ä¼˜åŒ–

```typescript
// å¯ç”¨ç¡¬ä»¶åŠ é€Ÿ
app.commandLine.appendSwitch('enable-gpu-rasterization')

// é¢„åŠ è½½çª—å£
const preloadWindow = new BrowserWindow({
  show: false,
  webPreferences: { preload: './preload.js' }
})
```

---

## ğŸ“„ è®¸å¯è¯

MIT License

---

<div align="center">

**ğŸ’™ Built with React + Electron**

[è¿”å›ä¸»é¡¹ç›®](../) | [åç«¯æ–‡æ¡£](../backend/README.md)

</div>
